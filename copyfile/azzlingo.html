<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AzzamLingo - تعلم اللغة الألمانية بذكاء</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 10% 20%, rgba(42, 230, 111, 0.1) 0%, rgba(0, 0, 0, 0) 20%),
                        radial-gradient(circle at 90% 80%, rgba(0, 255, 153, 0.1) 0%, rgba(0, 0, 0, 0) 20%);
            z-index: -1;
        }

        /* التصميم العام */
        .lingo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .lingo-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-bottom: 2px solid #2AE66F;
        }

        .lingo-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }

        .lingo-header p {
            font-size: 1.2rem;
            color: #ccc;
            max-width: 700px;
            margin: 0 auto;
        }

        /* بطاقات المستويات */
        .levels-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }

        .level-card {
            background: rgba(30, 30, 40, 0.7);
            border-radius: 15px;
            padding: 25px;
            width: 250px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            backdrop-filter: blur(10px);
        }

        .level-card:hover {
            transform: translateY(-10px);
            border-color: #2AE66F;
            box-shadow: 0 10px 30px rgba(42, 230, 111, 0.3);
        }

        .level-card.selected {
            border-color: #00FF99;
            background: rgba(42, 230, 111, 0.15);
        }

        .level-card h3 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #00FF99;
        }

        .level-card p {
            color: #aaa;
            margin-bottom: 20px;
            min-height: 80px;
        }

        .level-card .btn {
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .level-card .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 255, 153, 0.4);
        }

        /* واجهة الدرس */
        .lesson-container {
            background: rgba(20, 20, 30, 0.8);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
            border: 1px solid rgba(42, 230, 111, 0.3);
            backdrop-filter: blur(10px);
        }

        .lesson-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(42, 230, 111, 0.3);
        }

        .lesson-header h2 {
            font-size: 1.8rem;
            color: #00FF99;
        }

        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            height: 15px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* تبويبات الدرس */
        .lesson-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: rgba(42, 230, 111, 0.2);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            color: #ccc;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            color: #000;
        }

        .tab-btn:hover:not(.active) {
            background: rgba(42, 230, 111, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        /* محتوى الكلمات */
        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .vocab-card {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(42, 230, 111, 0.2);
            transition: all 0.3s ease;
        }

        .vocab-card:hover {
            transform: translateY(-5px);
            border-color: #2AE66F;
            box-shadow: 0 5px 15px rgba(42, 230, 111, 0.2);
        }

        .vocab-card h4 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #00FF99;
        }

        .vocab-card p {
            color: #aaa;
            margin-bottom: 15px;
        }

        .example {
            font-style: italic;
            color: #2AE66F;
            border-top: 1px solid rgba(42, 230, 111, 0.2);
            padding-top: 10px;
            margin-top: 10px;
        }

        /* محتوى القواعد */
        .grammar-content {
            background: rgba(30, 30, 40, 0.6);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(42, 230, 111, 0.2);
        }

        .grammar-point {
            margin-bottom: 25px;
        }

        .grammar-point h4 {
            font-size: 1.4rem;
            color: #00FF99;
            margin-bottom: 10px;
        }

        .grammar-point p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .grammar-examples {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            border-left: 3px solid #2AE66F;
        }

        /* محادثة الذكاء الاصطناعي */
        .chat-container {
            background: rgba(20, 20, 30, 0.7);
            border-radius: 15px;
            height: 400px;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(42, 230, 111, 0.3);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 18px;
            border-radius: 18px;
            animation: fadeIn 0.3s ease;
        }

        .user-message {
            background: linear-gradient(90deg, #2a5be6, #2a8fe6);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .bot-message {
            background: rgba(42, 230, 111, 0.2);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            background: rgba(30, 30, 40, 0.8);
            border-top: 1px solid rgba(42, 230, 111, 0.3);
        }

        .chat-input input {
            flex: 1;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid rgba(42, 230, 111, 0.3);
            background: rgba(0, 0, 0, 0.4);
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .chat-input button {
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            color: #000;
            border: none;
            padding: 12px 25px;
            border-radius: 30px;
            margin-left: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(0, 255, 153, 0.5);
        }

        /* الأزرار العامة */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            background: rgba(42, 230, 111, 0.2);
            border: 2px solid #2AE66F;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: linear-gradient(90deg, #2AE66F, #00FF99);
            color: #000;
            transform: translateY(-3px);
        }

        /* التكيف مع الشاشات الصغيرة */
        @media (max-width: 768px) {
            .levels-container {
                flex-direction: column;
                align-items: center;
            }
            
            .level-card {
                width: 100%;
                max-width: 350px;
            }
            
            .vocabulary-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-container {
                height: 350px;
            }
        }
    </style>
</head>
<body>
    <div class="lingo-container">
        <div class="lingo-header">
            <h1><i class="fas fa-language"></i> AzzamLingo</h1>
            <p>نظام تعليم اللغة الألمانية الذكي - ابدأ رحلتك مع معلم ذكي ينظم تعلمك حسب مستواك</p>
        </div>

        <!-- اختيار المستوى -->
        <div class="levels-container" id="levelsContainer">
            <div class="level-card" data-level="A1">
                <h3>A1</h3>
                <p>مبتدئ - فهم واستخدام تعابير يومية بسيطة وجمل أساسية</p>
                <button class="btn">اختر هذا المستوى</button>
            </div>
            
            <div class="level-card" data-level="A2">
                <h3>A2</h3>
                <p>ابتدائي - فهم جمل وتعبيرات شائعة في مجالات ذات صلة مباشرة</p>
                <button class="btn">اختر هذا المستوى</button>
            </div>
            
            <div class="level-card" data-level="B1">
                <h3>B1</h3>
                <p>متوسط - فهم النقاط الرئيسية في مواضيع مألوفة مثل العمل والدراسة</p>
                <button class="btn">اختر هذا المستوى</button>
            </div>
            
            <div class="level-card" data-level="B2">
                <h3>B2</h3>
                <p>متوسط متقدم - فهم الأفكار الرئيسية لنصوص معقدة في مواضيع ملموسة ومجردة</p>
                <button class="btn">اختر هذا المستوى</button>
            </div>
        </div>

        <!-- واجهة الدرس -->
        <div class="lesson-container" id="lessonContainer">
            <div class="lesson-header">
                <h2 id="lessonTitle">الدرس 1: التعريف عن النفس</h2>
                <div>
                    <span id="currentLevel">A1</span>
                    <span> | التقدم: </span>
                    <span id="progressPercent">25%</span>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="lesson-tabs">
                <button class="tab-btn active" data-tab="vocabulary">الكلمات الجديدة</button>
                <button class="tab-btn" data-tab="grammar">القواعد النحوية</button>
                <button class="tab-btn" data-tab="conversation">محادثة ذكية</button>
            </div>
            
            <!-- محتوى الكلمات -->
            <div class="tab-content active" id="vocabularyContent">
                <h3 style="margin-bottom: 20px; color: #00FF99;">الكلمات الأساسية لهذا الدرس</h3>
                <div class="vocabulary-grid" id="vocabularyGrid">
                    <!-- سيتم ملؤها بالجافاسكريبت -->
                </div>
            </div>
            
            <!-- محتوى القواعد -->
            <div class="tab-content" id="grammarContent">
                <h3 style="margin-bottom: 20px; color: #00FF99;">القواعد النحوية للمستوى</h3>
                <div class="grammar-content" id="grammarContentInner">
                    <!-- سيتم ملؤها بالجافاسكريبت -->
                </div>
            </div>
            
            <!-- محادثة الذكاء الاصطناعي -->
            <div class="tab-content" id="conversationContent">
                <h3 style="margin-bottom: 20px; color: #00FF99;">تدرب على المحادثة مع المعلم الذكي</h3>
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot-message">
                            مرحباً! أنا معلمك الذكي للغة الألمانية. يمكننا التحدث باستخدام الكلمات والقواعد التي تعلمتها في هذا الدرس. هيا نبدأ!
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="userInput" placeholder="اكتب رسالتك هنا باللغة الألمانية...">
                        <button id="sendMessage"><i class="fas fa-paper-plane"></i> إرسال</button>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="action-btn" id="prevLesson"><i class="fas fa-arrow-right"></i> الدرس السابق</button>
                <button class="action-btn" id="nextLesson"><i class="fas fa-arrow-left"></i> الدرس التالي</button>
            </div>
        </div>
    </div>

    <script>
        // بيانات المستويات والدروس
        const levelsData = {
            A1: {
                title: "المستوى A1 - مبتدئ",
                lessons: [
                    {
                        title: "الدرس 1: التعريف عن النفس",
                        vocabulary: [
                            { german: "Hallo", arabic: "مرحباً", english: "Hello", example: "Hallo, ich bin Ahmed." },
                            { german: "Ich", arabic: "أنا", english: "I", example: "Ich komme aus Ägypten." },
                            { german: "heissen", arabic: "اسمي", english: "am called", example: "Ich heisse Azzam." },
                            { german: "Name", arabic: "اسم", english: "name", example: "Mein Name ist Sara." },
                            { german: "wohnen", arabic: "أسكن", english: "live", example: "Ich wohne in Berlin." }
                        ],
                        grammar: [
                            {
                                title: "الجملة البسيطة",
                                description: "في اللغة الألمانية، يأتي الفاعل أولاً، ثم الفعل، ثم المفعول به.",
                                examples: [
                                    "Ich heisse Azzam. (أنا اسمي عزام)",
                                    "Du wohnst in Kairo. (أنت تسكن في القاهرة)"
                                ]
                            },
                            {
                                title: "أدوات التعريف",
                                description: "أدوات التعريف في الألمانية هي der (مذكر)، die (مؤنث)، das (محايد).",
                                examples: [
                                    "der Mann (الرجل)",
                                    "die Frau (المرأة)",
                                    "das Kind (الطفل)"
                                ]
                            }
                        ]
                    },
                    {
                        title: "الدرس 2: الأسرة والأصدقاء",
                        vocabulary: [
                            { german: "Familie", arabic: "عائلة", english: "family", example: "Meine Familie ist groß." },
                            { german: "Vater", arabic: "أب", english: "father", example: "Mein Vater ist Arzt." },
                            { german: "Mutter", arabic: "أم", english: "mother", example: "Meine Mutter kocht gut." },
                            { german: "Bruder", arabic: "أخ", english: "brother", example: "Ich habe einen Bruder." },
                            { german: "Schwester", arabic: "أخت", english: "sister", example: "Meine Schwester studiert." }
                        ],
                        grammar: [
                            {
                                title: "ضمائر الملكية",
                                description: "تتغير ضمائر الملكية حسب الجنس والعدد.",
                                examples: [
                                    "mein Vater (أبي - مذكر)",
                                    "meine Mutter (أمي - مؤنث)",
                                    "mein Kind (طفلي - محايد)"
                                ]
                            }
                        ]
                    }
                ]
            },
            A2: {
                title: "المستوى A2 - ابتدائي",
                lessons: [
                    {
                        title: "الدرس 1: الحياة اليومية",
                        vocabulary: [
                            { german: "arbeiten", arabic: "يعمل", english: "work", example: "Ich arbeite in einer Firma." },
                            { german: "studieren", arabic: "يدرس", english: "study", example: "Er studiert Medizin." },
                            { german: "essen", arabic: "يأكل", english: "eat", example: "Wir essen zu Mittag." },
                            { german: "trinken", arabic: "يشرب", english: "drink", example: "Sie trinkt Kaffee." }
                        ],
                        grammar: [
                            {
                                title: "الأفعال المنتظمة في المضارع",
                                description: "للأفعال المنتظمة نهاية -e للمتكلم، -st للمخاطب، -t للغائب.",
                                examples: [
                                    "ich lerne (أنا أتعلم)",
                                    "du lernst (أنت تتعلم)",
                                    "er lernt (هو يتعلم)"
                                ]
                            }
                        ]
                    }
                ]
            },
            B1: {
                title: "المستوى B1 - متوسط",
                lessons: [
                    {
                        title: "الدرس 1: العمل والمهنة",
                        vocabulary: [
                            { german: "Beruf", arabic: "مهنة", english: "profession", example: "Was ist dein Beruf?" },
                            { german: "Arbeitgeber", arabic: "صاحب العمل", english: "employer", example: "Mein Arbeitgeber ist großzügig." },
                            { german: "Kollege", arabic: "زميل", english: "colleague", example: "Mein Kollege hilft mir." }
                        ],
                        grammar: [
                            {
                                title: "جمل السبب والنتيجة",
                                description: "يمكن التعبير عن السبب باستخدام weil أو da.",
                                examples: [
                                    "Ich lerne Deutsch, weil ich in Deutschland arbeiten möchte.",
                                    "Da es regnet, bleibe ich zu Hause."
                                ]
                            }
                        ]
                    }
                ]
            },
            B2: {
                title: "المستوى B2 - متوسط متقدم",
                lessons: [
                    {
                        title: "الدرس 1: المناقشات المعقدة",
                        vocabulary: [
                            { german: "Meinung", arabic: "رأي", english: "opinion", example: "Was ist deine Meinung dazu?" },
                            { german: "Argument", arabic: "حجة", english: "argument", example: "Er hat starke Argumente." },
                            { german: "Diskussion", arabic: "مناقشة", english: "discussion", example: "Wir führen eine Diskussion." }
                        ],
                        grammar: [
                            {
                                title: "الجمل الشرطية",
                                description: "الجمل الشرطية من النوع الثاني تستخدم للتعبير عن مواقف غير واقعية.",
                                examples: [
                                    "Wenn ich reich wäre, würde ich um die Welt reisen.",
                                    "Wenn ich Zeit hätte, würde ich mehr lesen."
                                ]
                            }
                        ]
                    }
                ]
            }
        };

        // عناصر DOM
        const levelsContainer = document.getElementById('levelsContainer');
        const lessonContainer = document.getElementById('lessonContainer');
        const lessonTitle = document.getElementById('lessonTitle');
        const currentLevelSpan = document.getElementById('currentLevel');
        const progressBar = document.getElementById('progressBar');
        const progressPercent = document.getElementById('progressPercent');
        const vocabularyGrid = document.getElementById('vocabularyGrid');
        const grammarContent = document.getElementById('grammarContentInner');
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendMessageBtn = document.getElementById('sendMessage');
        const prevLessonBtn = document.getElementById('prevLesson');
        const nextLessonBtn = document.getElementById('nextLesson');
        const tabBtns = document.querySelectorAll('.tab-btn');

        // متغيرات الحالة
        let currentLevel = null;
        let currentLessonIndex = 0;
        let progress = 25;

        // اختيار المستوى
        document.querySelectorAll('.level-card .btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const card = this.closest('.level-card');
                currentLevel = card.dataset.level;
                
                // إزالة التحديد من جميع البطاقات
                document.querySelectorAll('.level-card').forEach(c => {
                    c.classList.remove('selected');
                });
                
                // تحديد البطاقة المختارة
                card.classList.add('selected');
                
                // إظهار واجهة الدرس بعد تأخير بسيط
                setTimeout(() => {
                    levelsContainer.style.display = 'none';
                    lessonContainer.style.display = 'block';
                    loadLesson();
                }, 500);
            });
        });

        // تحميل الدرس الحالي
        function loadLesson() {
            if (!currentLevel) return;
            
            const levelData = levelsData[currentLevel];
            const lesson = levelData.lessons[currentLessonIndex];
            
            // تحديث واجهة الدرس
            lessonTitle.textContent = lesson.title;
            currentLevelSpan.textContent = currentLevel;
            progressBar.style.width = `${progress}%`;
            progressPercent.textContent = `${progress}%`;
            
            // تحميل الكلمات
            vocabularyGrid.innerHTML = '';
            lesson.vocabulary.forEach(word => {
                const card = document.createElement('div');
                card.className = 'vocab-card';
                card.innerHTML = `
                    <h4>${word.german}</h4>
                    <p><strong>العربية:</strong> ${word.arabic}</p>
                    <p><strong>الإنجليزية:</strong> ${word.english}</p>
                    <p class="example"><strong>مثال:</strong> ${word.example}</p>
                `;
                vocabularyGrid.appendChild(card);
            });
            
            // تحميل القواعد
            grammarContent.innerHTML = '';
            lesson.grammar.forEach(grammarPoint => {
                const pointDiv = document.createElement('div');
                pointDiv.className = 'grammar-point';
                pointDiv.innerHTML = `
                    <h4>${grammarPoint.title}</h4>
                    <p>${grammarPoint.description}</p>
                    <div class="grammar-examples">
                        ${grammarPoint.examples.map(ex => `<p>${ex}</p>`).join('')}
                    </div>
                `;
                grammarContent.appendChild(pointDiv);
            });
        }

        // تغيير التبويبات
        tabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // إزالة النشاط من جميع الأزرار
                tabBtns.forEach(b => b.classList.remove('active'));
                
                // إضافة النشاط للزر الحالي
                this.classList.add('active');
                
                // إخفاء جميع محتويات التبويبات
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // إظهار محتوى التبويب المحدد
                const tabId = this.dataset.tab + 'Content';
                document.getElementById(tabId).classList.add('active');
            });
        });

        // إرسال رسالة في المحادثة
        function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;
            
            // إضافة رسالة المستخدم
            addMessage(message, 'user');
            
            // مسح حقل الإدخال
            userInput.value = '';
            
            // إعداد الرد (في التطبيق الحقيقي سيكون اتصال بالذكاء الاصطناعي)
            const responses = [
                "Das ist eine gute Frage! (هذا سؤال جيد!)",
                "Könnten Sie das bitte wiederholen? (هل يمكنك تكرار ذلك من فضلك؟)",
                "Interessant! Was möchten Sie noch wissen? (مثير للاهتمام! ماذا تريد أن تعرف أيضًا؟)",
                "Ich verstehe. Könnten Sie ein Beispiel geben? (أفهم. هل يمكنك إعطاء مثال؟)",
                "Das ist ein wichtiger Punkt. (هذه نقطة مهمة.)",
                "Lassen Sie uns über etwas anderes sprechen. (دعنا نتحدث عن شيء آخر.)"
            ];
            
            // اختيار رد عشوائي (محاكاة للذكاء الاصطناعي)
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            
            // إضافة الرد بعد تأخير محاكاة للتفكير
            setTimeout(() => {
                addMessage(randomResponse, 'bot');
            }, 1000);
        }

        // إضافة رسالة إلى المحادثة
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            
            // التمرير إلى آخر رسالة
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // معالجة الضغط على Enter في حقل المحادثة
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // معالجة الأحداث
        sendMessageBtn.addEventListener('click', sendMessage);
        prevLessonBtn.addEventListener('click', () => changeLesson(-1));
        nextLessonBtn.addEventListener('click', () => changeLesson(1));

        // تغيير الدرس
        function changeLesson(direction) {
            const levelData = levelsData[currentLevel];
            const lessonCount = levelData.lessons.length;
            
            // تحديث فهرس الدرس
            currentLessonIndex += direction;
            
            // التحقق من الحدود
            if (currentLessonIndex < 0) currentLessonIndex = 0;
            if (currentLessonIndex >= lessonCount) currentLessonIndex = lessonCount - 1;
            
            // تحديث التقدم
            progress = 25 + (currentLessonIndex * 25);
            if (progress > 100) progress = 100;
            
            // تحميل الدرس الجديد
            loadLesson();
        }

        // تهيئة التقدم
        progressBar.style.width = `${progress}%`;
    </script>
</body>
</html>